#:kivy 1.10.1
#:import Factory kivy.factory.Factory

<MyPopup@Popup>:
    # auto_dismiss: False
    size_hint: 0.5, 0.5
    title: "É esta a tua resposta final?"
    BoxLayout:
        orientation: "vertical"
        Button:
            text: 'Sim'
            on_release:
                app.metagame.game.check()
                root.dismiss()
        Button:
            text: 'Não'
            on_release: root.dismiss()

<Game>:
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: "public"
            Button:
                text: "phone"
            Button:
                text: "changing"
            Button:
                text: "50:50"
                on_press:
                    self.disabled = True
                    root.use_50_50()
        Label:
            text: root.question
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: root.A
                disabled: root.button_disabled["A"]
                on_release:
                    root.current_button_selected = "A"
                    Factory.MyPopup().open()
            Button:
                text: root.B
                disabled: root.button_disabled["B"]
                on_release:
                    root.current_button_selected = "B"
                    Factory.MyPopup().open()
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: root.C
                disabled: root.button_disabled["C"]
                on_release:
                    root.current_button_selected = "C"
                    Factory.MyPopup().open()
            Button:
                text: root.D
                disabled: root.button_disabled["D"]
                on_release:
                    root.current_button_selected = "D"
                    Factory.MyPopup().open()

<GameOverScreen@Screen>:
    Label:
        text: "You WIN"

<MetaGame>:
    id: metagame
    game: game
    game_over_screen: game_over_screen
    Game:
        id: game
        name: "game"
        manager: metagame
    GameOverScreen:
        id: game_over_screen
        name: "game_over_screen"
        manager: metagame