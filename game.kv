#:kivy 1.10.1
#:import Factory kivy.factory.Factory

<CofirmAnswerPopup@Popup>:
    # auto_dismiss: False
    size_hint: 0.5, 0.5
    title: "É esta a tua resposta final?"
    BoxLayout:
        orientation: "vertical"
        Button:
            text: 'Sim'
            on_release:
                app.metagame.game.check()
                root.dismiss()
        Button:
            text: 'Não'
            on_release: root.dismiss()

<PublicHelpPopup@Popup>:
    # auto_dismiss: False
    size_hint: 0.5, 0.5
    title: "Public help"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: 'A: %s%%' % app.metagame.game.public_perc["A"]
        Label:
            text: 'B: %s%%' % app.metagame.game.public_perc["B"]
        Label:
            text: 'C: %s%%' % app.metagame.game.public_perc["C"]
        Label:
            text: 'D: %s%%' % app.metagame.game.public_perc["D"]

<Game>:
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: "public"
                on_release:
                    self.disabled = True
                    root.public_help()
                    Factory.PublicHelpPopup().open()
            Button:
                text: "phone"
            Button:
                text: "skip"
                on_release:
                    self.disabled = True
                    root.skip_question()
            Button:
                text: "50:50"
                on_release:
                    self.disabled = True
                    root.use_50_50()
        Label:
            text: root.question
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: "A: %s" % root.A
                disabled: root.button_disabled["A"]
                on_release:
                    root.current_button_selected = "A"
                    Factory.CofirmAnswerPopup().open()
            Button:
                text: "B: %s" % root.B
                disabled: root.button_disabled["B"]
                on_release:
                    root.current_button_selected = "B"
                    Factory.CofirmAnswerPopup().open()
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: "C: %s" % root.C
                disabled: root.button_disabled["C"]
                on_release:
                    root.current_button_selected = "C"
                    Factory.CofirmAnswerPopup().open()
            Button:
                text: "D: %s" % root.D
                disabled: root.button_disabled["D"]
                on_release:
                    root.current_button_selected = "D"
                    Factory.CofirmAnswerPopup().open()

<GameOverScreen@Screen>:
    Label:
        text: "You WIN"

<MetaGame>:
    id: metagame
    game: game
    game_over_screen: game_over_screen
    Game:
        id: game
        name: "game"
        manager: metagame
    GameOverScreen:
        id: game_over_screen
        name: "game_over_screen"
        manager: metagame